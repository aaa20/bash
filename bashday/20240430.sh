#!/bin/bash


shopt -s extglob; : "${PS1@P}"; : "${_//$'\x01'+([^$'\x02'])$'\x02'}"; : "${#_}"; printf '%b' "\e#8\e[$(((LINES-1)/2));$(((COLUMNS-_)/2))H"


# ChaptGTP выдает такое обьяснение команды

# Разберём эту команду по частям:

# shopt -s extglob включает расширенное сопоставление шаблонов в Bash. Это позволяет использовать дополнительные возможности при работе с шаблонами, включая операторы, такие как +(), который используется в данной команде.

# 1: "${ПС1@P}": Здесь используется оператор @P для параметрного расширения, который преобразует значение переменной PS1 в строку, которая будет показывать, когда PS1 интерпретируется в качестве приглашения командной строки. PS1 — это переменная оболочки, которая определяет формат приглашения командной строки. Оператор : используется в качестве заглушки, которая просто оценивает и игнорирует свои аргументы, но при этом приводит к расширению и выполнению PS1@P.

# 2: "${_//$'\x01'+([^$'\x02'])$'\x02'}": Это сложное расширение параметра, использующее расширенное сопоставление шаблонов (extglob), которое удаляет управляющие символы, используемые для определения начала и конца цветного текста и других управляющих последовательностей в приглашении командной строки (PS1). $'\x01' и $'\x02' — это коды ASCII для начала и конца использования таких управляющих последовательностей. После этой замены в _ остаётся только текстовая часть PS1, бесцветная.

# 3: "${#_}": Здесь мы измеряем длину обработанной строки (после удаления управляющих последовательностей). Это число символов, которые будут реально видны пользователю как часть приглашения.

# printf '%b' "\e#8\e[$(((LINES-1)/2));$(((COLUMNS-_)/2))H": Наконец, мы используем printf для вывода управляющих последовательностей, которые очищают экран и перемещают курсор в центр. Вместо того, чтобы использовать конкретное местоположение, команда рассчитывает среднее положение на основании значений LINES и COLUMNS (которые указывают размер окна терминала) и длины приглашения командной строки, обработанного ранее. Таким образом, курсор устанавливается примерно в центр экрана относительно вертикального расположения и сдвигается влево на половину длины приглашения командной строки для горизонтального расположения.

# Эта команда демонстрирует глубокое понимание работы оболочки Bash и внимание к деталям при работе с управляющими последовательностями и расширениями параметров.
